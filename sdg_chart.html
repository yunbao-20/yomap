<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YunTech 2019-2025 雲林在地深耕統計報告</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/sdg_chart.css">
</head>
<body>

<div class="container">
    <header>
        <h1>YunTech 2019-2025<br>在地深耕永續影響力報告</h1>
        <p>基於雲林在地新聞與實質活動之量化統計</p>
    </header>

    <section class="section-animated" id="part1">
        <div class="section-title">
            <h2>01. 策略發展與產業轉型</h2>
            <span>Strategic Development & Industry Transformation (硬實力指標)</span>
        </div>

        <div class="sdg-row-solid">
            <div class="sdg-icon-solid c-sdg-13">13</div>
            <div class="track-solid">
                <div class="bar-solid c-sdg-13" data-val="12" data-max="20">
                    <div class="bar-label-solid"><span class="counter">0</span> 項</div>
                </div>
            </div>
            <div class="project-note">淨零轉型/碳盤查/增能培訓</div>
        </div>

        <div class="sdg-row-solid">
            <div class="sdg-icon-solid c-sdg-12">12</div>
            <div class="track-solid">
                <div class="bar-solid c-sdg-12" data-val="11" data-max="20">
                    <div class="bar-label-solid"><span class="counter">0</span> 項</div>
                </div>
            </div>
            <div class="project-note">循環經濟/一驗多證/農業剩餘</div>
        </div>

        <div class="sdg-row-solid">
            <div class="sdg-icon-solid c-sdg-9">9</div>
            <div class="track-solid">
                <div class="bar-solid c-sdg-9" data-val="9" data-max="20">
                    <div class="bar-label-solid"><span class="counter">0</span> 項</div>
                </div>
            </div>
            <div class="project-note">數位轉型/智慧農業/產學研</div>
        </div>

        <div class="sdg-row-solid">
            <div class="sdg-icon-solid c-sdg-8">8</div>
            <div class="track-solid">
                <div class="bar-solid c-sdg-8" data-val="8" data-max="20">
                    <div class="bar-label-solid"><span class="counter">0</span> 項</div>
                </div>
            </div>
            <div class="project-note">創生中心/青年創業/文創</div>
        </div>

        <div class="sdg-row-solid">
            <div class="sdg-icon-solid c-sdg-16">16</div>
            <div class="track-solid">
                <div class="bar-solid c-sdg-16" data-val="5" data-max="20">
                    <div class="bar-label-solid"><span class="counter">0</span> 項</div>
                </div>
            </div>
            <div class="project-note">監獄技藝班/正義制度/智慧決策</div>
        </div>

    </section>

    <section class="section-animated" id="part2">
        <div class="section-title">
            <h2>02. 社會共融與在地活力</h2>
            <span>Social Inclusion & Community Vitality (軟實力指標)</span>
        </div>

        <div class="sdg-row-box">
            <div class="sdg-box-left c-sdg-11">
                <div class="sdg-box-num">11</div>
                <i class="fas fa-city sdg-box-icon"></i>
                <div class="sdg-box-text">永續城鄉</div>
            </div>
            <div class="track-hollow border-sdg-11">
                <div class="bar-fill c-sdg-11" data-val="15" data-max="20">
                    <div class="stat-info-hollow">
                        <span class="stat-desc">雲林溪/舊城保存/部落</span>
                        <span class="stat-num counter">0</span>
                        <span class="stat-unit">項活動</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sdg-row-box">
            <div class="sdg-box-left c-sdg-17">
                <div class="sdg-box-num">17</div>
                <i class="fas fa-handshake sdg-box-icon"></i>
                <div class="sdg-box-text">夥伴關係</div>
            </div>
            <div class="track-hollow border-sdg-17">
                <div class="bar-fill c-sdg-17" data-val="13" data-max="20">
                    <div class="stat-info-hollow">
                        <span class="stat-desc">跨域聯盟/產官學/國際</span>
                        <span class="stat-num counter">0</span>
                        <span class="stat-unit">項活動</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sdg-row-box">
            <div class="sdg-box-left c-sdg-4">
                <div class="sdg-box-num">4</div>
                <i class="fas fa-book-open sdg-box-icon"></i>
                <div class="sdg-box-text">優質教育</div>
            </div>
            <div class="track-hollow border-sdg-4">
                <div class="bar-fill c-sdg-4" data-val="12" data-max="20">
                    <div class="stat-info-hollow">
                        <span class="stat-desc">永續課程/人才培育/USR</span>
                        <span class="stat-num counter">0</span>
                        <span class="stat-unit">項活動</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sdg-row-box">
            <div class="sdg-box-left c-sdg-3">
                <div class="sdg-box-num">3</div>
                <i class="fas fa-heart-pulse sdg-box-icon"></i>
                <div class="sdg-box-text">健康福祉</div>
            </div>
            <div class="track-hollow border-sdg-3">
                <div class="bar-fill c-sdg-3" data-val="11" data-max="20">
                    <div class="stat-info-hollow">
                        <span class="stat-desc">智慧醫療/高齡/運動科技</span>
                        <span class="stat-num counter">0</span>
                        <span class="stat-unit">項活動</span>
                    </div>
                </div>
            </div>
        </div>

    </section>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // 使用 Intersection Observer 偵測捲動
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.15
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    animateSection(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section-animated').forEach(section => {
            observer.observe(section);
        });

        function animateSection(section) {
            const bars = section.querySelectorAll('.bar-solid, .bar-fill');
            
            bars.forEach(bar => {
                const val = parseInt(bar.getAttribute('data-val'));
                const max = parseInt(bar.getAttribute('data-max'));
                const counterSpan = bar.querySelector('.counter');

                // A. 寬度動畫
                let widthPercent = (val / max) * 100;
                if(widthPercent > 100) widthPercent = 100;
                
                setTimeout(() => {
                    if (bar.classList.contains('bar-fill')) {
                        // 空心框要預留 padding 空間
                        bar.style.width = `calc(${widthPercent}% - 8px)`;
                    } else {
                        bar.style.width = `${widthPercent}%`;
                    }
                }, 300);

                // B. 數字跳動動畫
                if (counterSpan) {
                    let start = 0;
                    let stepTime = 50; 
                    
                    let timer = setInterval(() => {
                        // 數字較小，每次+1即可，營造細數的感覺
                        start += 1;
                        if (start >= val) {
                            start = val;
                            clearInterval(timer);
                        }
                        counterSpan.innerText = start;
                    }, stepTime);
                }
            });
        }
    });
</script>

</body>
</html>
